

      <% if flash[:notice] %>
    <div class="flash">
      <%= flash[:notice] %>
    </div>
    <% end %>

      <div class="container px-5 px-sm-0">

        <% if @opinion.errors.any? %>
    <div id="error_explanation">
      <h3><%= @opinion.errors.count %> errors prohibited this opinion from being saved:</h3>
      <ul>
    <% @opinion.errors.full_messages.each do |message| %>
      <li>
        <%= message %>
        </li>
    <% end %>
  </ul>
    </div>
<% end %>

    <div class="row">
      <div class="col-md-3">

    <h2>User info</h2>
    <%= image_tag @user.get_profile_image %>

 <table class="table">

   <tbody>
    <tr></tr>
    <tr>
    <th>name</th>
    <th><%= @user.name %></th>
    </tr>
    <tr>
    <th>introduction</th>
    <th><%= @user.introduction %></th>
    </tr>
    <tr>
    <th>follows</th>
    <th><%= link_to @user.followings.count, users_user_followings_path(@user) %></th>
    </tr>
    <tr>
    <th>followers</th>
    <th><%= link_to @user.followers.count, users_user_followings_path(@user) %></th>
    </tr>
   </tbody>
 </table>

<div class="row">

         <%= link_to edit_users_user_path(@user.id), class: 'btn btn-outline-secondary btn-block' do %>

     <% end %>
   </div>

<h2 class="mt-3">New book</h2>

  <%= form_with model: @opinion, url: '/users/opinions', method: :post do |f| %>
  <div class="form-group">
    <div>
      <label>Title</label>
    </div>
    <div>
      <%= f.text_field :opinion_title, class: 'form-control' %>
    </div>
    </div>

  <div class="form-group">
    <div>
      <label>Opinion</label>
    </div>
    <div>
      <%= f.text_area :opinion_body, class: 'form-control' %>
    </div>
  </div>

    <div class="form-group">

       <%= f.submit 'Create Book', class: 'btn btn-success' %>

    </div>

  <% end %>

  </div>

  <div class="col-md-8 offset-md-1">

    <h2>Books</h2>

  <table class="table table-hover table-inverse">

  <thead>
      <tr>
        <th></th>
        <th>Title</th>
        <th>Opinion</th>
        <th>コメント数</th>
        <th>ブックマーク数</th>
      </tr>
    </thead>

    <% @opinions.each do |opinion| %>

      <tbody>
        <tr>
      <td>
        <%= link_to users_user_path(opinion.user.id) do %>
          <%= image_tag opinion.user.get_profile_image %>
        <% end %>
      </td>
      <td>
        <%= link_to users_opinion_path(opinion.id) do %>
        <%= opinion.opinion_title %>
        <% end %>
      </td>
      <td>
        <%= opinion.opinion_body %>
      </td>
      <td>
        <%= opinion.opinion_comments.count %>
      </td>
      <td>
        <% if opinion.favorited_by?(current_user) %>
        <p>
          <%= link_to users_opinion_opinion_favorites_path(opinion, params: { opinion: { down: 1} }), method: :delete do %>
          ♥<%= opinion.opinion_favorites.count %> いいね
          <% end %>
        </p>
        <% else %>
        <p>
          <%= link_to users_opinion_opinion_favorites_path(opinion, params: { opinion: { up: 1} }), method: :post do %>
          ♡<%= opinion.opinion_favorites.count %> いいね
          <% end %>
       </p>
       <% end %>
      </td>
        </tr>
      </tbody>

  <% end %>

   </table>

  </div>

  </div>

  </div>